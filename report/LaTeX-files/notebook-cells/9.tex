  \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Estimation of causal efects}
        
        Y1 \PY{o}{\PYZlt{}\PYZhy{}} data\PY{o}{\PYZdl{}}ever\PYZus{}self\PYZus{}employed
        Y2 \PY{o}{\PYZlt{}\PYZhy{}} data\PY{o}{\PYZdl{}}log\PYZus{}tot\PY{p}{[}\PY{o}{!}\PY{k+kp}{is.na}\PY{p}{(}data\PY{o}{\PYZdl{}}log\PYZus{}tot\PY{p}{)}\PY{p}{]}
        
        A1 \PY{o}{\PYZlt{}\PYZhy{}} data\PY{o}{\PYZdl{}}treated
        A2 \PY{o}{\PYZlt{}\PYZhy{}} data\PY{o}{\PYZdl{}}treated\PY{p}{[}\PY{o}{!}\PY{k+kp}{is.na}\PY{p}{(}data\PY{o}{\PYZdl{}}log\PYZus{}tot\PY{p}{)}\PY{p}{]}
        
        all\PYZus{}covars \PY{o}{\PYZlt{}\PYZhy{}} data\PY{p}{[}\PY{p}{,} \PY{k+kp}{colnames}\PY{p}{(}data\PY{p}{)} \PY{o}{\PYZpc{}in\PYZpc{}} \PY{k+kp}{names}\PY{o}{\PYZdl{}}covars\PY{p}{]}
        
        W \PY{o}{\PYZlt{}\PYZhy{}}  all\PYZus{}covars
        W1 \PY{o}{\PYZlt{}\PYZhy{}} all\PYZus{}covars
        W2 \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{subset}\PY{p}{(}data\PY{p}{,} \PY{o}{!}\PY{k+kp}{is.na}\PY{p}{(}data\PY{o}{\PYZdl{}}log\PYZus{}tot\PY{p}{)}\PY{p}{)}
        W2 \PY{o}{\PYZlt{}\PYZhy{}} W2\PY{p}{[}\PY{p}{,} \PY{k+kp}{colnames}\PY{p}{(}data\PY{p}{)} \PY{o}{\PYZpc{}in\PYZpc{}} \PY{k+kp}{names}\PY{o}{\PYZdl{}}covars\PY{p}{]}
        
        screen1 \PY{o}{\PYZlt{}\PYZhy{}}  screening\PY{p}{(}x\PY{o}{=}W1\PY{p}{,} y\PY{o}{=}Y1\PY{p}{,} method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{holp\PYZdq{}}\PY{p}{,} family\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{binomial\PYZdq{}}\PY{p}{,} num.select\PY{o}{=}\PY{l+m}{15}\PY{p}{)}\PY{o}{\PYZdl{}}screen
        screen2 \PY{o}{\PYZlt{}\PYZhy{}}  screening\PY{p}{(}x\PY{o}{=}W2\PY{p}{,} y\PY{o}{=}Y2\PY{p}{,} method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{holp\PYZdq{}}\PY{p}{,} family\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{gaussian\PYZdq{}}\PY{p}{,} num.select\PY{o}{=}\PY{l+m}{15}\PY{p}{)}\PY{o}{\PYZdl{}}screen
        screenA \PY{o}{\PYZlt{}\PYZhy{}}  screening\PY{p}{(}x\PY{o}{=}W\PY{p}{,}  y\PY{o}{=}A1\PY{p}{,} method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{holp\PYZdq{}}\PY{p}{,} family\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{binomial\PYZdq{}}\PY{p}{,} num.select\PY{o}{=}\PY{l+m}{15}\PY{p}{)}\PY{o}{\PYZdl{}}screen 
        screenA2 \PY{o}{\PYZlt{}\PYZhy{}} screening\PY{p}{(}x\PY{o}{=}W2\PY{p}{,} y\PY{o}{=}A2\PY{p}{,} method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{holp\PYZdq{}}\PY{p}{,} family\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{binomial\PYZdq{}}\PY{p}{,} num.select\PY{o}{=}\PY{l+m}{15}\PY{p}{)}\PY{o}{\PYZdl{}}screen 
        
        W1 \PY{o}{\PYZlt{}\PYZhy{}} W1\PY{p}{[}\PY{p}{,}screen1\PY{p}{]}
        W2 \PY{o}{\PYZlt{}\PYZhy{}} W2\PY{p}{[}\PY{p}{,}screen2\PY{p}{]}
        
        \PY{c+c1}{\PYZsh{} William: added/moved this line here to make code work}
        screenA2 \PY{o}{\PYZlt{}\PYZhy{}} screening\PY{p}{(}x\PY{o}{=}W2\PY{p}{,} y\PY{o}{=}A2\PY{p}{,} method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{holp\PYZdq{}}\PY{p}{,} family\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{binomial\PYZdq{}}\PY{p}{,} num.select\PY{o}{=}\PY{l+m}{15}\PY{p}{)}\PY{o}{\PYZdl{}}screen 
        \PY{c+c1}{\PYZsh{} screenA2 depends on W2, and W2 was changed above, so old screenA2 couldn\PYZsq{}t be used to subset new W2}
        
        WA \PY{o}{\PYZlt{}\PYZhy{}}  W\PY{p}{[} \PY{p}{,}screenA\PY{p}{]}
        WA2 \PY{o}{\PYZlt{}\PYZhy{}} W2\PY{p}{[}\PY{p}{,}screenA2\PY{p}{]}
\end{Verbatim}

