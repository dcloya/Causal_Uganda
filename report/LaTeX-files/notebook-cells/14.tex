   \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}14}]:} \PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}}
         \PY{c+c1}{\PYZsh{} G\PYZhy{}computation formula}
         \PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}}
         
         np\PYZus{}boot\PYZus{}gcomp \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kr}{function}\PY{p}{(}Y\PY{p}{,} A\PY{p}{,} W\PY{p}{,} nrep\PY{p}{,} family\PY{p}{)}\PY{p}{\PYZob{}}
             
           X \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{cbind}\PY{p}{(}A\PY{p}{,}W\PY{p}{)}
           \PY{k+kp}{print}\PY{p}{(}\PY{k+kp}{colnames}\PY{p}{(}X\PY{p}{)}\PY{p}{)}
           \PY{c+c1}{\PYZsh{} William: wrapped in suppressWarnings() to prevent excessive verbosity}
           \PY{k+kp}{suppressWarnings}\PY{p}{(}
             QbarSL \PY{o}{\PYZlt{}\PYZhy{}} SuperLearner\PY{p}{(}Y\PY{o}{=}\PY{k+kp}{as.numeric}\PY{p}{(}Y\PY{p}{)}\PY{p}{,}
                                X\PY{o}{=}X\PY{p}{,}
                                SL.library\PY{o}{=}Q\PYZus{}library\PY{p}{,}
                                family\PY{o}{=}family\PY{p}{)}
             \PY{p}{)} 
             
           results \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{rep}\PY{p}{(}\PY{k+kc}{NA}\PY{p}{,} nrep\PY{p}{)}
           n       \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{NROW}\PY{p}{(}Y\PY{p}{)}
           \PY{c+c1}{\PYZsh{}stop(\PYZdq{}stop\PYZdq{})}
           \PY{k+kr}{for}\PY{p}{(}i \PY{k+kr}{in} \PY{l+m}{1}\PY{o}{:}nrep\PY{p}{)}\PY{p}{\PYZob{}}
               
             i\PYZus{}boot  \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{sample}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{k+kp}{nrow}\PY{p}{(}W\PY{p}{)}\PY{p}{,} size\PY{o}{=}n\PY{p}{,} replace\PY{o}{=}\PY{k+kc}{TRUE}\PY{p}{)}
             W\PYZus{}boot  \PY{o}{\PYZlt{}\PYZhy{}} X\PY{p}{[}i\PYZus{}boot\PY{p}{,}\PY{p}{]}
             W1\PYZus{}boot \PY{o}{\PYZlt{}\PYZhy{}} W0\PYZus{}boot \PY{o}{\PYZlt{}\PYZhy{}} W\PYZus{}boot
         
             W1\PYZus{}boot\PY{o}{\PYZdl{}}A \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+m}{1}
             W0\PYZus{}boot\PY{o}{\PYZdl{}}A \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+m}{0}  
               
             \PY{c+c1}{\PYZsh{}psi\PYZus{}bootstrap \PYZlt{}\PYZhy{} G\PYZus{}comp(Y = Y\PYZus{}b, A = A\PYZus{}b, W = W\PYZus{}b, family = family)}
             \PY{c+c1}{\PYZsh{} William: wrapped in suppressWarnings() to prevent excessive verbosity}
             \PY{k+kp}{suppressWarnings}\PY{p}{(}
               Qbar1W \PY{o}{\PYZlt{}\PYZhy{}} predict\PY{p}{(}QbarSL\PY{p}{,} newdata\PY{o}{=}W1\PYZus{}boot\PY{p}{,} type\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{response\PYZdq{}}\PY{p}{)}\PY{o}{\PYZdl{}}pred
               \PY{p}{)} 
         
             \PY{c+c1}{\PYZsh{} William: wrapped in suppressWarnings() to prevent excessive verbosity}
             \PY{k+kp}{suppressWarnings}\PY{p}{(}
               Qbar0W \PY{o}{\PYZlt{}\PYZhy{}} predict\PY{p}{(}QbarSL\PY{p}{,} newdata\PY{o}{=}W0\PYZus{}boot\PY{p}{,} type\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{response\PYZdq{}}\PY{p}{)}\PY{o}{\PYZdl{}}pred
               \PY{p}{)} 
         
             psi\PYZus{}bootstrap \PY{o}{\PYZlt{}\PYZhy{}} \PY{p}{(}Qbar1W \PY{o}{\PYZhy{}} Qbar0W\PY{p}{)}
             \PY{c+c1}{\PYZsh{} William: to prevent excess verbosity in output}
             \PY{k+kp}{suppressWarnings}\PY{p}{(}
             results\PY{p}{[}i\PY{p}{]}    \PY{o}{\PYZlt{}\PYZhy{}} psi\PYZus{}bootstrap
                 \PY{p}{)}
           \PY{p}{\PYZcb{}}
           \PY{k+kr}{return}\PY{p}{(}results\PY{p}{)}
         \PY{p}{\PYZcb{}}
\end{Verbatim}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../main/report"
%%% End:
